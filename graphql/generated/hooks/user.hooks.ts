/* Do not edit this file. It was generated programmatically. */

import { UserCreationArgs, UserUpdateArgs } from "@/graphql/generated/args/user.args";
import { UserFragment } from "@/graphql/generated/fragments/user.fragment";
import {
  CREATE_USER,
  getOptimisticResponseForUserCreation,
  updateCacheAfterCreatingUser,
  UPDATE_USER,
} from "@/graphql/generated/mutations/user.mutations";
import {
  initializeUserData,
  UserData,
  userReducer,
  usersReducer,
} from "@/graphql/generated/reducers/user.reducer";
import {
  userCreationInputSchema,
  userUpdateInputSchema,
} from "@/graphql/generated/schemas/user.schemas";
import { useHandleMutation } from "@/utils/data/mutation";
import { ArrayAction, Payload } from "@/utils/data/reduction";
import { MutationHookOptions } from "@apollo/client";
import { Dispatch, useReducer } from "react";

type UserCreationMutationHookOptions = MutationHookOptions<
  { createUser: UserFragment },
  UserCreationArgs
>;

export const useCreateUser = (options?: UserCreationMutationHookOptions) => {
  return useHandleMutation<{ createUser: UserFragment }, UserCreationArgs>(
    CREATE_USER,
    { ...updateCacheAfterCreatingUser, ...(options ?? {}) },
    userCreationInputSchema,
    getOptimisticResponseForUserCreation
  );
};

type UserUpdateMutationHookOptions = MutationHookOptions<
  { updateUser: UserFragment },
  UserUpdateArgs
>;

export const useUpdateUser = (options?: UserUpdateMutationHookOptions) => {
  return useHandleMutation<{ updateUser: UserFragment }, UserUpdateArgs>(
    UPDATE_USER,
    options,
    userUpdateInputSchema
  );
};

export const useUserReducer = (data?: UserData): [UserData, Dispatch<Payload<UserData>>] => {
  const starterData = data ?? {};
  const initializedData = initializeUserData(starterData);
  const [userData, dispatchUserData] = useReducer(userReducer, initializedData, initializeUserData);
  return [userData, dispatchUserData];
};

export const useUsersReducer = (
  data: UserFragment[]
): [UserFragment[], Dispatch<ArrayAction<UserFragment>>] => {
  return useReducer(usersReducer, data);
};
