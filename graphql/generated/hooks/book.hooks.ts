/* Do not edit this file. It was generated programmatically. */

import { BookCreationArgs, BookUpdateArgs } from "@/graphql/generated/args/book.args";
import { BookFragment } from "@/graphql/generated/fragments/book.fragment";
import {
  CREATE_BOOK,
  getOptimisticResponseForBookCreation,
  updateCacheAfterCreatingBook,
  UPDATE_BOOK,
} from "@/graphql/generated/mutations/book.mutations";
import {
  BookData,
  bookReducer,
  booksReducer,
  initializeBookData,
} from "@/graphql/generated/reducers/book.reducer";
import {
  bookCreationInputSchema,
  bookUpdateInputSchema,
} from "@/graphql/generated/schemas/book.schemas";
import { useHandleMutation } from "@/utils/data/mutation";
import { ArrayAction, Payload } from "@/utils/data/reduction";
import { MutationHookOptions } from "@apollo/client";
import { Dispatch, useReducer } from "react";

type BookCreationMutationHookOptions = MutationHookOptions<
  { createBook: BookFragment },
  BookCreationArgs
>;

export const useCreateBook = (options?: BookCreationMutationHookOptions) => {
  return useHandleMutation<{ createBook: BookFragment }, BookCreationArgs>(
    CREATE_BOOK,
    { ...updateCacheAfterCreatingBook, ...(options ?? {}) },
    bookCreationInputSchema,
    getOptimisticResponseForBookCreation
  );
};

type BookUpdateMutationHookOptions = MutationHookOptions<
  { updateBook: BookFragment },
  BookUpdateArgs
>;

export const useUpdateBook = (options?: BookUpdateMutationHookOptions) => {
  return useHandleMutation<{ updateBook: BookFragment }, BookUpdateArgs>(
    UPDATE_BOOK,
    options,
    bookUpdateInputSchema
  );
};

export const useBookReducer = (data?: BookData): [BookData, Dispatch<Payload<BookData>>] => {
  const starterData = data ?? {};
  const initializedData = initializeBookData(starterData);
  const [bookData, dispatchBookData] = useReducer(bookReducer, initializedData, initializeBookData);
  return [bookData, dispatchBookData];
};

export const useBooksReducer = (
  data: BookFragment[]
): [BookFragment[], Dispatch<ArrayAction<BookFragment>>] => {
  return useReducer(booksReducer, data);
};
